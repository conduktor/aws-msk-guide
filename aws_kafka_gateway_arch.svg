<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: aws_kafka_gateway_arch_v7 Pages: 1 -->
<svg width="1651pt" height="454pt"
 viewBox="0.00 0.00 1651.00 454.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 450)">
<title>aws_kafka_gateway_arch_v7</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-450 1647,-450 1647,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_internet</title>
<polygon fill="none" stroke="#cbd5e0" points="50,-224 50,-376 207,-376 207,-224 50,-224"/>
<text text-anchor="middle" x="128.5" y="-362.4" font-family="Helvetica,sans-Serif" font-size="12.00">Internet</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_customer</title>
<polygon fill="none" stroke="#2563eb" points="449.5,-8 449.5,-418 1635,-418 1635,-8 449.5,-8"/>
<text text-anchor="middle" x="1042.25" y="-403.6" font-family="Helvetica,sans-Serif" font-size="13.00">Customer AWS Account / VPC</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_pub</title>
<polygon fill="none" stroke="#93c5fd" points="457.5,-298 457.5,-388 1171,-388 1171,-298 457.5,-298"/>
<text text-anchor="middle" x="814.25" y="-375.2" font-family="Helvetica,sans-Serif" font-size="11.00">Public Subnets</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_priv</title>
<polygon fill="none" stroke="#93c5fd" points="703.5,-16 703.5,-290 1627,-290 1627,-16 703.5,-16"/>
<text text-anchor="middle" x="1165.25" y="-277.2" font-family="Helvetica,sans-Serif" font-size="11.00">Private Subnets</text>
</g>
<!-- users -->
<g id="node1" class="node">
<title>users</title>
<path fill="#f8fafc" stroke="#334155" d="M173.5,-268C173.5,-268 83.5,-268 83.5,-268 77.5,-268 71.5,-262 71.5,-256 71.5,-256 71.5,-244 71.5,-244 71.5,-238 77.5,-232 83.5,-232 83.5,-232 173.5,-232 173.5,-232 179.5,-232 185.5,-238 185.5,-244 185.5,-244 185.5,-256 185.5,-256 185.5,-262 179.5,-268 173.5,-268"/>
<text text-anchor="middle" x="128.5" y="-253.2" font-family="Helvetica,sans-Serif" font-size="11.00">End Users</text>
<text text-anchor="middle" x="128.5" y="-241.2" font-family="Helvetica,sans-Serif" font-size="11.00">(SSO / Corporate)</text>
</g>
<!-- alb_int -->
<g id="node6" class="node">
<title>alb_int</title>
<path fill="#eef2ff" stroke="#334155" d="M791.5,-180C791.5,-180 723.5,-180 723.5,-180 717.5,-180 711.5,-174 711.5,-168 711.5,-168 711.5,-156 711.5,-156 711.5,-150 717.5,-144 723.5,-144 723.5,-144 791.5,-144 791.5,-144 797.5,-144 803.5,-150 803.5,-156 803.5,-156 803.5,-168 803.5,-168 803.5,-174 797.5,-180 791.5,-180"/>
<text text-anchor="middle" x="757.5" y="-159.2" font-family="Helvetica,sans-Serif" font-size="11.00">ALB (Internal)</text>
</g>
<!-- users&#45;&gt;alb_int -->
<g id="edge1" class="edge">
<title>users&#45;&gt;alb_int</title>
<path fill="none" stroke="black" d="M185.69,-242.11C305.15,-225.35 583.07,-186.34 701.48,-169.72"/>
<polygon fill="black" stroke="black" points="702,-173.18 711.42,-168.33 701.03,-166.25 702,-173.18"/>
<text text-anchor="middle" x="500" y="-218" font-family="Times,serif" font-size="10.00">console.customer.com</text>
<text text-anchor="middle" x="500" y="-207" font-family="Times,serif" font-size="10.00">HTTPS (443)</text>
</g>
<!-- partners -->
<g id="node2" class="node">
<title>partners</title>
<path fill="#fffbeb" stroke="#334155" d="M187,-347C187,-347 70,-347 70,-347 64,-347 58,-341 58,-335 58,-335 58,-323 58,-323 58,-317 64,-311 70,-311 70,-311 187,-311 187,-311 193,-311 199,-317 199,-323 199,-323 199,-335 199,-335 199,-341 193,-347 187,-347"/>
<text text-anchor="middle" x="128.5" y="-332.2" font-family="Helvetica,sans-Serif" font-size="11.00">3rd&#45;Party Partner Apps</text>
<text text-anchor="middle" x="128.5" y="-320.2" font-family="Helvetica,sans-Serif" font-size="11.00">(Kafka clients)</text>
</g>
<!-- waf -->
<g id="node3" class="node">
<title>waf</title>
<path fill="#f1f5f9" stroke="#334155" d="M522.5,-351C522.5,-351 477.5,-351 477.5,-351 471.5,-351 465.5,-345 465.5,-339 465.5,-339 465.5,-327 465.5,-327 465.5,-321 471.5,-315 477.5,-315 477.5,-315 522.5,-315 522.5,-315 528.5,-315 534.5,-321 534.5,-327 534.5,-327 534.5,-339 534.5,-339 534.5,-345 528.5,-351 522.5,-351"/>
<text text-anchor="middle" x="500" y="-330.2" font-family="Helvetica,sans-Serif" font-size="11.00">AWS WAF</text>
</g>
<!-- partners&#45;&gt;waf -->
<g id="edge4" class="edge">
<title>partners&#45;&gt;waf</title>
<path fill="none" stroke="black" d="M199,-329.75C274.25,-330.57 391.98,-331.84 455.26,-332.53"/>
<polygon fill="black" stroke="black" points="455.26,-336.03 465.3,-332.64 455.34,-329.03 455.26,-336.03"/>
<text text-anchor="middle" x="350.5" y="-345" font-family="Times,serif" font-size="10.00">gateway.customer.com</text>
<text text-anchor="middle" x="350.5" y="-334" font-family="Times,serif" font-size="10.00">Kafka/TLS</text>
</g>
<!-- alb_ext -->
<g id="node4" class="node">
<title>alb_ext</title>
<path fill="#eef2ff" stroke="#334155" d="M811,-360C811,-360 704,-360 704,-360 698,-360 692,-354 692,-348 692,-348 692,-336 692,-336 692,-330 698,-324 704,-324 704,-324 811,-324 811,-324 817,-324 823,-330 823,-336 823,-336 823,-348 823,-348 823,-354 817,-360 811,-360"/>
<text text-anchor="middle" x="757.5" y="-339.2" font-family="Helvetica,sans-Serif" font-size="11.00">ALB (Internet&#45;facing)</text>
</g>
<!-- waf&#45;&gt;alb_ext -->
<g id="edge5" class="edge">
<title>waf&#45;&gt;alb_ext</title>
<path fill="none" stroke="black" d="M534.66,-334.19C571.86,-335.5 632.93,-337.65 681.58,-339.36"/>
<polygon fill="black" stroke="black" points="681.65,-342.87 691.76,-339.72 681.89,-335.87 681.65,-342.87"/>
<text text-anchor="middle" x="624" y="-340.8" font-family="Times,serif" font-size="9.00">L7 inspection</text>
</g>
<!-- gw_svc -->
<g id="node5" class="node">
<title>gw_svc</title>
<path fill="#e0f2fe" stroke="#334155" d="M1151,-360C1151,-360 949,-360 949,-360 943,-360 937,-354 937,-348 937,-348 937,-336 937,-336 937,-330 943,-324 949,-324 949,-324 1151,-324 1151,-324 1157,-324 1163,-330 1163,-336 1163,-336 1163,-348 1163,-348 1163,-354 1157,-360 1151,-360"/>
<text text-anchor="middle" x="1050" y="-345.2" font-family="Helvetica,sans-Serif" font-size="11.00">Conduktor Gateway</text>
<text text-anchor="middle" x="1050" y="-333.2" font-family="Helvetica,sans-Serif" font-size="11.00">Service on EKS/ECS (Fargate optional)</text>
</g>
<!-- alb_ext&#45;&gt;gw_svc -->
<g id="edge6" class="edge">
<title>alb_ext&#45;&gt;gw_svc</title>
<path fill="none" stroke="black" d="M823.33,-342C853.77,-342 891.09,-342 926.55,-342"/>
<polygon fill="black" stroke="black" points="926.99,-345.5 936.99,-342 926.99,-338.5 926.99,-345.5"/>
<text text-anchor="middle" x="880" y="-345" font-family="Times,serif" font-size="10.00">TLS 443</text>
</g>
<!-- msk -->
<g id="node9" class="node">
<title>msk</title>
<path fill="#dcfce7" stroke="#334155" d="M1530.5,-174C1530.5,-174 1423.5,-174 1423.5,-174 1417.5,-174 1411.5,-168 1411.5,-162 1411.5,-162 1411.5,-150 1411.5,-150 1411.5,-144 1417.5,-138 1423.5,-138 1423.5,-138 1530.5,-138 1530.5,-138 1536.5,-138 1542.5,-144 1542.5,-150 1542.5,-150 1542.5,-162 1542.5,-162 1542.5,-168 1536.5,-174 1530.5,-174"/>
<text text-anchor="middle" x="1477" y="-153.2" font-family="Helvetica,sans-Serif" font-size="11.00">Amazon MSK (Kafka)</text>
</g>
<!-- gw_svc&#45;&gt;msk -->
<g id="edge7" class="edge">
<title>gw_svc&#45;&gt;msk</title>
<path fill="none" stroke="black" d="M1127.12,-323.93C1189.56,-308 1271.91,-284.11 1299,-263 1322.93,-244.35 1311.31,-223.96 1335,-205 1354.21,-189.63 1378.56,-178.92 1401.6,-171.53"/>
<polygon fill="black" stroke="black" points="1402.83,-174.81 1411.38,-168.56 1400.79,-168.12 1402.83,-174.81"/>
<text text-anchor="middle" x="1249" y="-305" font-family="Times,serif" font-size="10.00">Kafka (SASL_SSL)</text>
</g>
<!-- amp -->
<g id="node10" class="node">
<title>amp</title>
<path fill="#f1f5f9" stroke="#334155" d="M1607,-262C1607,-262 1347,-262 1347,-262 1341,-262 1335,-256 1335,-250 1335,-250 1335,-238 1335,-238 1335,-232 1341,-226 1347,-226 1347,-226 1607,-226 1607,-226 1613,-226 1619,-232 1619,-238 1619,-238 1619,-250 1619,-250 1619,-256 1613,-262 1607,-262"/>
<text text-anchor="middle" x="1477" y="-247.2" font-family="Helvetica,sans-Serif" font-size="11.00">Amazon Managed Service for Prometheus (AMP)</text>
<text text-anchor="middle" x="1477" y="-235.2" font-family="Helvetica,sans-Serif" font-size="11.00">Metrics ingestion</text>
</g>
<!-- gw_svc&#45;&gt;amp -->
<g id="edge10" class="edge">
<title>gw_svc&#45;&gt;amp</title>
<path fill="none" stroke="#9ca3af" stroke-dasharray="5,2" d="M1163.1,-340.89C1206.12,-338.41 1255.34,-333.04 1299,-322 1347.71,-309.68 1399.95,-285.11 1434.95,-266.83"/>
<polygon fill="#9ca3af" stroke="#9ca3af" points="1436.7,-269.86 1443.9,-262.09 1433.43,-263.67 1436.7,-269.86"/>
<text text-anchor="middle" x="1249" y="-339.8" font-family="Times,serif" font-size="9.00">Gateway metrics</text>
</g>
<!-- console_svc -->
<g id="node7" class="node">
<title>console_svc</title>
<path fill="#e0e7ff" stroke="#334155" d="M1151,-161C1151,-161 949,-161 949,-161 943,-161 937,-155 937,-149 937,-149 937,-137 937,-137 937,-131 943,-125 949,-125 949,-125 1151,-125 1151,-125 1157,-125 1163,-131 1163,-137 1163,-137 1163,-149 1163,-149 1163,-155 1157,-161 1151,-161"/>
<text text-anchor="middle" x="1050" y="-146.2" font-family="Helvetica,sans-Serif" font-size="11.00">Console</text>
<text text-anchor="middle" x="1050" y="-134.2" font-family="Helvetica,sans-Serif" font-size="11.00">Service on EKS/ECS (Fargate optional)</text>
</g>
<!-- alb_int&#45;&gt;console_svc -->
<g id="edge2" class="edge">
<title>alb_int&#45;&gt;console_svc</title>
<path fill="none" stroke="black" d="M803.57,-159.05C836.62,-156.89 883.15,-153.85 926.82,-150.99"/>
<polygon fill="black" stroke="black" points="927.22,-154.47 936.97,-150.33 926.76,-147.49 927.22,-154.47"/>
<text text-anchor="middle" x="880" y="-158" font-family="Times,serif" font-size="10.00">HTTPS</text>
</g>
<!-- rds -->
<g id="node8" class="node">
<title>rds</title>
<path fill="#fde68a" stroke="#d97706" d="M1551.5,-85C1551.5,-85 1402.5,-85 1402.5,-85 1396.5,-85 1390.5,-79 1390.5,-73 1390.5,-73 1390.5,-61 1390.5,-61 1390.5,-55 1396.5,-49 1402.5,-49 1402.5,-49 1551.5,-49 1551.5,-49 1557.5,-49 1563.5,-55 1563.5,-61 1563.5,-61 1563.5,-73 1563.5,-73 1563.5,-79 1557.5,-85 1551.5,-85"/>
<text text-anchor="middle" x="1477" y="-70.2" font-family="Helvetica,sans-Serif" font-size="11.00">Amazon RDS for PostgreSQL</text>
<text text-anchor="middle" x="1477" y="-58.2" font-family="Helvetica,sans-Serif" font-size="11.00">(Multi&#45;AZ recommended)</text>
</g>
<!-- console_svc&#45;&gt;rds -->
<g id="edge8" class="edge">
<title>console_svc&#45;&gt;rds</title>
<path fill="none" stroke="black" d="M1108.52,-124.98C1135.73,-116.99 1168.81,-108.06 1199,-102 1258.72,-90.02 1326.55,-81.37 1380.14,-75.66"/>
<polygon fill="black" stroke="black" points="1380.73,-79.12 1390.31,-74.6 1380,-72.16 1380.73,-79.12"/>
<text text-anchor="middle" x="1249" y="-114.8" font-family="Times,serif" font-size="9.00">JDBC (TLS)</text>
<text text-anchor="middle" x="1249" y="-104.8" font-family="Times,serif" font-size="9.00">App metadata &amp; auth</text>
</g>
<!-- console_svc&#45;&gt;msk -->
<g id="edge3" class="edge">
<title>console_svc&#45;&gt;msk</title>
<path fill="none" stroke="black" d="M1163.29,-135.45C1175.34,-134.86 1187.42,-134.35 1199,-134 1243.42,-132.65 1254.64,-131.25 1299,-134 1332.74,-136.09 1369.9,-140.4 1401.42,-144.65"/>
<polygon fill="black" stroke="black" points="1401.06,-148.14 1411.45,-146.03 1402.02,-141.2 1401.06,-148.14"/>
<text text-anchor="middle" x="1249" y="-137" font-family="Times,serif" font-size="10.00">Kafka (SASL_SSL)</text>
</g>
<!-- console_svc&#45;&gt;amp -->
<g id="edge9" class="edge">
<title>console_svc&#45;&gt;amp</title>
<path fill="none" stroke="#9ca3af" stroke-dasharray="5,2" d="M1126.98,-161.06C1200.79,-178.6 1312.7,-205.19 1389.79,-223.51"/>
<polygon fill="#9ca3af" stroke="#9ca3af" points="1389.42,-227.02 1399.96,-225.93 1391.04,-220.21 1389.42,-227.02"/>
<text text-anchor="middle" x="1249" y="-201.8" font-family="Times,serif" font-size="9.00">Prometheus metrics</text>
</g>
<!-- amg -->
<g id="node11" class="node">
<title>amg</title>
<path fill="#f1f5f9" stroke="#334155" d="M1138,-262C1138,-262 962,-262 962,-262 956,-262 950,-256 950,-250 950,-250 950,-238 950,-238 950,-232 956,-226 962,-226 962,-226 1138,-226 1138,-226 1144,-226 1150,-232 1150,-238 1150,-238 1150,-250 1150,-250 1150,-256 1144,-262 1138,-262"/>
<text text-anchor="middle" x="1050" y="-247.2" font-family="Helvetica,sans-Serif" font-size="11.00">Amazon Managed Grafana (AMG)</text>
<text text-anchor="middle" x="1050" y="-235.2" font-family="Helvetica,sans-Serif" font-size="11.00">Dashboards</text>
</g>
<!-- amg&#45;&gt;amp -->
<g id="edge11" class="edge">
<title>amg&#45;&gt;amp</title>
<path fill="none" stroke="#9ca3af" stroke-dasharray="5,2" d="M1150.11,-244C1202.05,-244 1266.77,-244 1324.81,-244"/>
<polygon fill="#9ca3af" stroke="#9ca3af" points="1324.81,-247.5 1334.81,-244 1324.81,-240.5 1324.81,-247.5"/>
<text text-anchor="middle" x="1249" y="-246.8" font-family="Times,serif" font-size="9.00">Query metrics</text>
</g>
<!-- deploy_note -->
<g id="node12" class="node">
<title>deploy_note</title>
<polygon fill="#ecfdf5" stroke="#10b981" points="251,-446 0,-446 0,-390 257,-390 257,-440 251,-446"/>
<polyline fill="none" stroke="#10b981" points="251,-446 251,-440 "/>
<polyline fill="none" stroke="#10b981" points="257,-440 251,-440 "/>
<text text-anchor="middle" x="128.5" y="-433.2" font-family="Helvetica,sans-Serif" font-size="11.00">Deployment flexibility:</text>
<text text-anchor="middle" x="128.5" y="-421.2" font-family="Helvetica,sans-Serif" font-size="11.00">&#45; Gateway behind ALB/WAF (recommended)</text>
<text text-anchor="middle" x="128.5" y="-409.2" font-family="Helvetica,sans-Serif" font-size="11.00">&#45; Or exposed directly to public internet</text>
<text text-anchor="middle" x="128.5" y="-397.2" font-family="Helvetica,sans-Serif" font-size="11.00">(if customer chooses)</text>
</g>
</g>
</svg>
